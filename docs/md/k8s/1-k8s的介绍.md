# 1 应用部署方式的演变

## 1.1 应用部署方式的演变


-   在部署应用程序的方式上，主要经历了三个时代：

-   ① 传统部署：

-   互联网早期，会直接将应用部署在物理机上。

-   优点：简单，不需要其他的技术参与。

-   缺点：不能为应用程序定义资源的使用边界，很难合理的分配计算机资源，而且程序之间容易产生影响。

-   ② 虚拟化部署：

-   可以在一台物理机上运行多个虚拟机，每个虚拟机都是独立的一个环境。

-   优点：程序环境不会相互产生影响，提供了一定程序上的安全性。

-   缺点：增加了操作系统，浪费了部分资源。

-   ③ 容器化部署：

-   和虚拟化类似，但是共享了操作系统。

-   优点：

-   ① 可以保证每个容器拥有自己的文件系统、CPU 、内存和进程空间等。

-   ② 运行应用程序所需要的资源都被容器包装，并和底层基础架构解耦。

-   ③ 容器化的应用程序可以跨云服务商、跨 Linux 操作系统发行版进行部署。

  

## 1.2 容器化部署方式产生的问题及解决方案


-   容器化部署方式带来了很多的便利，但是也会带来一些问题，比如：

-   一旦容器故障停机了，怎么让另外一个容器立刻启动去替补停机的容器。

-   当并发访问量变大的时候，怎么做到横向扩展容器数量。

-   ……

-   这些容器管理的问题统称为 `容器编排问题` ，为了解决这些容器编排问题，就产生了一些容器编排的软件：

-   Swarm：Docker 自己的容器编排工具。

-   Mesos：Apache 的一个资源统一管控的工具，需要和 Marathon 结合。

-   Kubernetes：Google 开源的容器编排工具。

# 2 kubernetes 简介

  

-   Kubernetes，是一个全新的基于容器技术的分布式架构领先方案，是 Google 严格保密十几年的秘密武器-- Borg 系统的一个开源版本，于 2014 年 9 月发布第一个版本，2015 年 7 月发布第一个正式版本。

-   Kubernetes 的本质是一组服务器集群，它可以在集群的每个节点上运行特定的程序，来对节点中的容器进行管理。它的目的就是实现资源管理的自动化，主要提供了如下的功能：

-   自我修复：一旦某一个容器崩溃，能够在1秒左右迅速启动新的容器。

-   弹性伸缩：可以根据需要，自动对集群中正在运行的容器数量进行调整。

-   服务发现：服务可以通过自动发现的形式找到它所依赖的服务。

-   负载均衡：如果一个服务启动了多个容器，能够自动实现请求的负载均衡。

-   版本回退：如果发现新发布的程序版本有问题，可以立即回退到原来的版本。

-   存储编排：可以根据容器自身的需求自动创建存储卷。