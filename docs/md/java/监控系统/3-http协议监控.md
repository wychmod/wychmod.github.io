# Http 服务响应监控

## Http服务概述

绝⼤部分情况下，应⽤系统都是通过Http协议对外提供服务，Http服务是整个业务处理开始的地⽅，所以采集这部分数据可以整体了解到业务执⾏情况，这是⾮常关键的数据。

## 设计⽬标

如何设计针对Http服务数据的采集？先来看采集程的设计⽬标：
1. 保证稳定性：系统运⾏时，⼀直都可以采集数据
2. 保证通⽤性：尽可能⽀持更多的Http 服务实现
3. 实现简单：减少开发维护成本

## 插桩采集点

为到达上述⽬标，⾸先得先选择插桩采集点。Http 服务的实现 整体是由Servlet容器提供的，如Tomcat 、Jetty、Netty、⾃定义服务等。

![](../../youdaonote-images/Pasted%20image%2020240620001255.png)

Http 服务实现分为两部分， ⼀种是⽀持Servlet规范的，另⼀种是不⽀持Servlet规范的第三⽅实现，绝⼤部分业务都是基于⼀种实现的，所以不⽀持Servlet规范基本先不考虑。在Servlet规范这边，⼜划分成Mvc框架层、Servlet层、容器层，除了中间Servlet层其它两层的实现都是多样的，为了保证通⽤性在Servlet层插桩是最佳选择。

## Servlet 插桩的实现

### 采集数据：

1. URL路径
2. 客户端IP
3. 请求完整⽤时
4. 请求参数
5. 异常信息

```java

```

# Http API调⽤监控