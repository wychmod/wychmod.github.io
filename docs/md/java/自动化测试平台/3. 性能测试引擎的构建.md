## SpringBoot如何集成Jmeter开发
  
* 需求  
  
  * 开发压测平台，Spring Boot需要调用Jmeter进行压测，如何完成？  
  
* 解决方案一：使用Runtime类调用外部进程  
  
  * `Runtime`类是Java中的一个核心类，提供了与Java运行时环境交互的方法  
  
  * 它提供了与操作系统交互的接口，使Java应用程序能够执行系统命令、访问系统资源并执行特定操作。  
  
  * 主要用途包括以下几个方面：  
  
    * 启动和管理进程  
      * `Runtime`类提供了一些方法，如`exec()`，用于启动和管理外部进程。  
      * 这使得Java应用程序能够执行系统命令、启动其他应用程序或脚本，以及与外部进程进行交互。  
    * 访问系统资源  
      * `Runtime`类提供了一些方法，如`totalMemory()`和`freeMemory()`，用于获取Java虚拟机的内存信息。  
      * 还可以使用`getSystemResource()`方法获取系统资源路径，如类路径、库路径等。  
    * 执行特定操作  
      * `Runtime`类还提供了一些方法，如`exit()`，用于终止Java应用程序。  
      * 还可以使用`nanoTime()`方法获取当前纳秒时间，以及使用`currentTimeMillis()`方法获取当前毫秒时间。  
  
  * Jmeter命令行压测讲解  
  
    * 进到jmeter的bin目录下  
  
    ```shell
    ./jmeter -n -t /Users/xdclass/Desktop/report.jmx -l /Users/xdclass/Desktop/temp/jtl/result.jtl -e -o /Users/xdclass/Desktop/temp/result  
    ```  
    - 参数说明  
      - -n 非gui方式运行jmeter  
      - -t ：jmx 脚本路径  
      - -l ：results.log 运行结果保存路径，**注意：文件名不能重复，文件夹需要存在**  
      - -e ：在脚本运行结束后生成 HTML 报告  
      - -o ：用于存放 HTML 报告的目录，**文件夹需要存在**  
  
* 编码实战（大家可以先看，然后不实操，**如果实操记得注意Window的文件路径**）  
  
  ```java
  public class TestRuntime {  
        public static void main(String[] args) {  
          try {              // 调用Jmeter执行脚本  
              Process process = Runtime.getRuntime().exec("/Users/xdclass/Desktop/coding/apache-jmeter-5.5/bin/jmeter -n -t /Users/xdclass/Desktop/test.jmx -l results.log -e -o /Users/xdclass/Desktop/result");  
  // 读取Jmeter的输出  
              BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));  
              String line;              while ((line = reader.readLine()) != null) {                  System.out.println(line);              }  // 等待Jmeter进程结束  
              int exitCode = process.waitFor();  
              System.out.println("Jmeter exit code: " + exitCode);          } catch (IOException | InterruptedException e) {              e.printStackTrace();          }      }  }  
              ```  
* **问题点：**  
  
  * **可读性和维护拓展性差，难以平台化，停留现有认知**  
  
* 需要技术组长解决的问题：  
  
  * 梳理下合理的压测流程，怎么配置压测参数、开启压测、查看测试报告更方便


## 压测引擎数据库设计

* 数据库设计思路  
  * 技术负责人基于产品需求文档，日常压测流程的痛点进行整理需求  
  * 梳理下合理的压测流程，怎么配置压测参数、开启压测、查看测试报告更方便

* 数据库模型设计