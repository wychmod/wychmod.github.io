<?xml version="1.0" encoding="UTF-8" standalone="no"?><note xmlns="http://note.youdao.com" file-version="0" schema-version="1.0.3"><head/><body><para><coId>11-1582705118294</coId><text>Centos7.2配置https，及多个https配置</text><inline-styles><font-size><from>0</from><to>27</to><value>12</value></font-size></inline-styles><styles><align>center</align><font-size>12</font-size></styles></para><para><coId>03-1582705118296</coId><text>1、单个https配置</text><inline-styles><bold><from>0</from><to>11</to><value>true</value></bold><font-size><from>0</from><to>11</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>60-1582705118298</coId><text>检查相关依赖，如果没有就yum安装</text><inline-styles><font-size><from>0</from><to>17</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>28-1582705118299</coId><text>yum install mod_ssl openssl</text><inline-styles><font-size><from>0</from><to>27</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>71-1582705118301</coId><text>rpm -qa| grep mod_ssl</text><inline-styles><font-size><from>0</from><to>21</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>05-1582705118302</coId><source>https://note.youdao.com/yws/res/8532/C6DCB4872C6147B8A60895117CF5495B</source><text/><styles><align>center</align></styles></image><para><coId>79-1582705118304</coId><text>rpm -qa| grep openssl</text><inline-styles><font-size><from>0</from><to>21</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>02-1582705118305</coId><source>https://note.youdao.com/yws/res/8534/C55858F0391C4379A5D09B9184BB9418</source><text/><styles><align>center</align></styles></image><para><coId>61-1582705118305</coId><text>安装完成后会生成一个</text><inline-styles><font-size><from>0</from><to>10</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>69-1582705118306</coId><text>/etc/httpd/conf.d/ssl.conf文件</text><inline-styles><font-size><from>0</from><to>28</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>25-1582705118306</coId><text>然后把申请的证书上传上去自定义一个目录</text><inline-styles><font-size><from>0</from><to>19</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>08-1582705118307</coId><text>创建一个存放证书的目录</text><inline-styles><font-size><from>0</from><to>11</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>90-1582705118307</coId><text>mkdir /etc/httpd/conf/ssl/</text><inline-styles><font-size><from>0</from><to>26</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>82-1582705118308</coId><source>https://note.youdao.com/yws/res/8533/EA45246A4386494F94DEFA7D4EEBC966</source><text/><styles><align>center</align></styles></image><para><coId>34-1582705118308</coId><text>上传证书（证书我公司是阿里云申请的）</text><inline-styles><font-size><from>0</from><to>18</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>71-1582705118309</coId><source>https://note.youdao.com/yws/res/8536/247756AC5F9040168DDC986DBE0B2FB2</source><text/><styles><align>center</align></styles></image><para><coId>16-1582705118310</coId><text>开始配置ssl.conf文件，对源文件做备份</text><inline-styles><font-size><from>0</from><to>22</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>88-1582705118310</coId><source>https://note.youdao.com/yws/res/8535/FB4E91AFC13E439C9F0519037D2127CF</source><text/><styles><align>center</align></styles></image><para><coId>19-1582705118311</coId><text>开启你网站的目录</text><inline-styles><font-size><from>0</from><to>8</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>36-1582705118311</coId><source>https://note.youdao.com/yws/res/8537/92B2EAD3F0EB4058A2D3FD10FBDC47DB</source><text/><styles><align>center</align></styles></image><para><coId>12-1582705118311</coId><text>将servername设置为你的域名</text><inline-styles><font-size><from>0</from><to>18</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>03-1582705118313</coId><source>https://note.youdao.com/yws/res/8538/9A4D5C1C53EE49B49837EEE31F323E15</source><text/><styles><align>center</align></styles></image><para><coId>38-1582705118314</coId><text>注释掉原有的</text><inline-styles><font-size><from>0</from><to>6</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>65-1582705118315</coId><text>SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM</text><inline-styles><font-size><from>0</from><to>71</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>18-1582705118316</coId><source>https://note.youdao.com/yws/res/8539/528B981B8D9943EA9AF93D378D3A9A77</source><text/><styles><align>center</align></styles></image><para><coId>32-1582705118316</coId><text>开启ssl，设置为SSLHonorCipherOrder on</text><inline-styles><font-size><from>0</from><to>31</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>20-1582705118317</coId><source>https://note.youdao.com/yws/res/8540/F3CFE42E830D496ABAA1919DB16CA54D</source><text/><styles><align>center</align></styles></image><para><coId>11-1582705118318</coId><text>配置你证书路径</text><inline-styles><font-size><from>0</from><to>7</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>82-1582705118318</coId><source>https://note.youdao.com/yws/res/8541/31987DEF03B44A8E8F97DED7CBFE3D91</source><text/><styles><align>center</align></styles></image><para><coId>85-1582705118319</coId><text>重启apache就好了！</text><inline-styles><font-size><from>0</from><to>12</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>32-1582705118319</coId><text>如果访问时候没有权限就需要配置httpd.conf</text><inline-styles><font-size><from>0</from><to>25</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><image><coId>68-1582705118320</coId><source>https://note.youdao.com/yws/res/8542/DE9D37D770644F229F124EB0DCDE1C67</source><text/><styles><align>center</align></styles></image><para><coId>91-1582705118320</coId><text>测试访问：https://htcm-test.com                      ok</text><inline-styles><font-size><from>0</from><to>50</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>53-1582705118322</coId><text>2、当一台服务器有多个域名配置https时，在ssl配置文件增加VirtualHost 就好，跟apache是一样的。</text><inline-styles><bold><from>0</from><to>59</to><value>true</value></bold><font-size><from>0</from><to>59</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>29-1582705118324</coId><text>vim  ssl.conf</text><inline-styles><font-size><from>0</from><to>13</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>79-1582705118325</coId><text>#第一个https</text><inline-styles><font-size><from>0</from><to>9</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>32-1582705118325</coId><text>#DocumentRoot "/var/www/html"</text><inline-styles><font-size><from>0</from><to>29</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>48-1582705118326</coId><text>ServerName www.aaaaa.com:443</text><inline-styles><font-size><from>0</from><to>28</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>89-1582705118326</coId><text># Use separate log files for the SSL virtual host; note that LogLevel</text><inline-styles><font-size><from>0</from><to>69</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>97-1582705118328</coId><text># is not inherited from httpd.conf.</text><inline-styles><font-size><from>0</from><to>35</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>31-1582705118329</coId><text>ErrorLog logs/ssl_error_log</text><inline-styles><font-size><from>0</from><to>27</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>13-1582705118329</coId><text>TransferLog logs/ssl_access_log</text><inline-styles><font-size><from>0</from><to>31</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>63-1582705118330</coId><text>LogLevel warn</text><inline-styles><font-size><from>0</from><to>13</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>34-1582705118330</coId><text># SSL Engine Switch:</text><inline-styles><font-size><from>0</from><to>20</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>06-1582705118331</coId><text># Enable/Disable SSL for this virtual host.</text><inline-styles><font-size><from>0</from><to>43</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>93-1582705118331</coId><text>SSLEngine on</text><inline-styles><font-size><from>0</from><to>12</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>39-1582705118331</coId><text>SSLProxyEngine on</text><inline-styles><font-size><from>0</from><to>17</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>83-1582705118332</coId><text># 添加 SSL 协议支持协议，去掉不安全的协议</text><inline-styles><font-size><from>0</from><to>24</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>80-1582705118332</coId><text>SSLProtocol all -SSLv2 -SSLv3</text><inline-styles><font-size><from>0</from><to>29</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>83-1582705118332</coId><text># 修改加密套件如下</text><inline-styles><font-size><from>0</from><to>10</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>54-1582705118332</coId><text>SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM</text><inline-styles><font-size><from>0</from><to>71</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>13-1582705118333</coId><text>SSLHonorCipherOrder on</text><inline-styles><font-size><from>0</from><to>22</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>47-1582705118334</coId><text># 证书</text><inline-styles><font-size><from>0</from><to>4</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>67-1582705118335</coId><text>SSLCertificateFile /etc/httpd/conf/confluence/2054465_aaaa.com_public.crt</text><inline-styles><font-size><from>0</from><to>73</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>94-1582705118335</coId><text>SSLCertificateKeyFile /etc/httpd/conf/confluence/2054465_aaaa.com.key</text><inline-styles><font-size><from>0</from><to>69</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>37-1582705118336</coId><text>SSLCertificateChainFile /etc/httpd/conf/confluence/2054465_aaaa.com_chain.crt</text><inline-styles><font-size><from>0</from><to>77</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>72-1582705118337</coId><text>#第二个https</text><inline-styles><font-size><from>0</from><to>9</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>60-1582705118337</coId><text>#DocumentRoot "/var/www/html"</text><inline-styles><font-size><from>0</from><to>29</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>58-1582705118337</coId><text>ServerName www.aaaaa.com:443</text><inline-styles><font-size><from>0</from><to>28</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>44-1582705118338</coId><text># Use separate log files for the SSL virtual host; note that LogLevel</text><inline-styles><font-size><from>0</from><to>69</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>21-1582705118338</coId><text># is not inherited from httpd.conf.</text><inline-styles><font-size><from>0</from><to>35</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>13-1582705118339</coId><text>ErrorLog logs/ssl_error_log</text><inline-styles><font-size><from>0</from><to>27</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>14-1582705118339</coId><text>TransferLog logs/ssl_access_log</text><inline-styles><font-size><from>0</from><to>31</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>55-1582705118339</coId><text>LogLevel warn</text><inline-styles><font-size><from>0</from><to>13</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>74-1582705118339</coId><text># SSL Engine Switch:</text><inline-styles><font-size><from>0</from><to>20</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>34-1582705118340</coId><text># Enable/Disable SSL for this virtual host.</text><inline-styles><font-size><from>0</from><to>43</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>37-1582705118340</coId><text>SSLEngine on</text><inline-styles><font-size><from>0</from><to>12</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>63-1582705118340</coId><text>SSLProxyEngine on</text><inline-styles><font-size><from>0</from><to>17</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>60-1582705118341</coId><text># 添加 SSL 协议支持协议，去掉不安全的协议</text><inline-styles><font-size><from>0</from><to>24</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>86-1582705118341</coId><text>SSLProtocol all -SSLv2 -SSLv3</text><inline-styles><font-size><from>0</from><to>29</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>59-1582705118341</coId><text># 修改加密套件如下</text><inline-styles><font-size><from>0</from><to>10</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>78-1582705118341</coId><text>SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM</text><inline-styles><font-size><from>0</from><to>71</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>29-1582705118342</coId><text>SSLHonorCipherOrder on</text><inline-styles><font-size><from>0</from><to>22</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>00-1582705118342</coId><text># 证书</text><inline-styles><font-size><from>0</from><to>4</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>43-1582705118343</coId><text>SSLCertificateFile /etc/httpd/conf/confluence/2054465_aaaa.com_public.crt</text><inline-styles><font-size><from>0</from><to>73</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>82-1582705118343</coId><text>SSLCertificateKeyFile /etc/httpd/conf/confluence/2054465_aaaa.com.key</text><inline-styles><font-size><from>0</from><to>69</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>10-1582705118343</coId><text>SSLCertificateChainFile /etc/httpd/conf/confluence/2054465_aaaa.com_chain.crt</text><inline-styles><font-size><from>0</from><to>77</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para><para><coId>31-1582705118344</coId><text> </text><inline-styles><font-size><from>0</from><to>1</to><value>12</value></font-size></inline-styles><styles><font-size>12</font-size></styles></para></body></note>